<?xml version="1.0"?>
<section xml:id="iteration_the-for-loop">
  <title>The <c>for</c> loop</title>

  <!-- <video xml:id="forloop" youtube="blTBEqybQmQ" width="auto"/> -->

  <p>
    The <c>while</c> statement is a general-purpose tool for iteration, and is necessary for any instance of iteration where we don't know how many repetitions will be needed.
    However, if we do know how many are needed, there is a more efficient approach: the <c>for</c> statement.
  </p>

  <p>
    As a simple example, let's say we have some friends, and we'd like to send them each an email inviting them to our party.
    We don't quite know how to send email yet, so for the moment we'll just print a message for each friend.
  </p>
  <program xml:id="ac_theForLoop_1" label="ac_theForLoop_1" interactive="activecode" language="python">
    <input>
      for name in ["Joe", "Amy", "Brad", "Angelina", "Zuki", "Thandi", "Paris"]:
        print("Hi, " + name + "! Please come to my party on Saturday!")
    </input>
  </program>

 <p>
    Take a look at the output produced when you press the <c>run</c> button. There is one line printed for each friend. Here's how it works:
  </p>
  <ul>
    <li>
        <p>
            <c>name</c> in this <c>for</c> statement is called the <b>loop variable</b> or, alternatively, the <b>iterator</b> variable.
        </p>
    </li>
    <li>
        <p>
            The list of names in the square brackets is the sequence over which we will iterate.
        </p>
    </li>
    <li>
        <p>
            Line 2 is the <b>loop body</b>. The loop body is always indented. The indentation determines exactly what statements are “in the loop”. The loop body is performed one time for each name in the list.
        </p>
    </li>
    <li>
        <p>
            On each <i>iteration</i> or <i>pass</i> of the loop, first a check is done to see if there are still more items to be processed. If there are none left (this is called the <b>terminating condition</b> of the loop), the loop has finished. Program execution continues at the next statement after the loop body.
        </p>
    </li>
    <li>
        <p>
            If there are items still to be processed, the loop variable is updated to refer to the next item in the list. This means, in this case, that the loop body is executed here 7 times, and each time <c>name</c> will refer to a different friend.
        </p>
    </li>
    <li>
        <p>
            At the end of each execution of the body of the loop, Python returns to the <c>for</c> statement, to see if there are more items to be handled.
        </p>
    </li>
  </ul>
  <p>
    The overall syntax is <c>for &#60;loop_var_name&#62; in &#60;sequence&#62;:</c>
  </p>
  <ul>
    <li>
        <p>
            Between the words for and in, there must be a variable name for the loop variable. You can't put a whole expression there.
        </p>
    </li>
    <li>
        <p>
            A colon is required at the end of the line.
        </p>
    </li>
    <li>
        <p>
            After the word in and before the colon is an expression that must evaluate to a sequence (e.g, a string or a list or a tuple). It could be a literal, or a variable name, or a more complex expression.
        </p>
    </li>
  </ul>

  <note>
    <p>
      Introduction of the <c>for</c> statement causes us to think about the types of iteration we have seen.
      The <c>for</c> statement will always iterate through a sequence of values like the list of names for the party.
    </p>

    <p>
      Since we know that it will iterate once for each value in the collection, 
      it is often said that a <c>for</c> loop creates a <term>definite iteration</term> because we definitely know how many times we are going to iterate.
      On the other hand, the <c>while</c> statement is dependent on a condition that needs to evaluate to <c>False</c> in order for the loop to terminate.
      Since we do not necessarily know when this will happen, it creates what we call <term>indefinite iteration</term>.
      Indefinite iteration simply means that we don't know how many times we will repeat but 
      eventually the condition controlling the iteration will fail and the iteration will stop (unless we have an infinite loop).
    </p>
  </note>

  <note>
    <title>Choosing between <c>for</c> and <c>while</c></title>

    <p>
      Use a <c>for</c> loop if you know the maximum number of times that you'll need to execute the body. 
      For example, if you're traversing a list of elements, or know the number of times you'll iterate, then choose the <c>for</c> loop.
    </p>

    <p>
      So any problem like "iterate this weather model run for 1000 cycles", "search this list of words", 
      or "check all integers up to 10000 to see which are prime" suggest that a <c>for</c> loop is best.
    </p>

    <p>
      By contrast, if you are required to repeat some computation until some condition is met,
      as we did in the <c>3n + 1</c> problem, you'll need a <c>while</c> loop.
    </p>
  </note>

  <p>
    What you will notice here is that the <c>while</c> loop is more work for you <mdash/> the programmer <mdash/> than the equivalent <c>for</c> loop.
    When using a <c>while</c> loop you have to control the loop variable yourself.
    You give it an initial value, test for completion, and then make sure you change something in the body so that the loop terminates.
  </p>

  <term>Check your understanding</term>
  <exercise label="mc_theForLoop_1">
    <statement><p>True or False: You can rewrite any for-loop as a while-loop.</p></statement>
    <choices>
      <choice correct="yes">
        <statement><p>True</p></statement>
        <feedback>The syntax for a for-loop can make it easier and more appealing, but a while loop is just as powerful as a for-loop and often more flexible.</feedback>
      </choice>

      <choice>
        <statement><p>False</p></statement>
        <feedback>Often a for-loop is more natural and convenient for a task, but that same task can always be expressed using a while loop.</feedback>
      </choice>
    </choices>
  </exercise>

</section>
